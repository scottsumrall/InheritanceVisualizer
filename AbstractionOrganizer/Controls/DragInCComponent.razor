
@using Microsoft.JSInterop
@inject IJSRuntime JS;



<div id="button">
    <button class="button" @onclick="CreateClass">new E</button>
</div>

<div id="class-drop-zone"></div>
    @foreach (string value in Values)
    {
        <div id="@value" class="draggable new" onclick="this.focus()" text-align="center">
            @*    <div id="flex">
        <div id="inner" contenteditable="true" onclick="this.focus()" placeholder="Enter text here..." display="inline-block"></div>
        </div>*@
            <ClassBodyComponent></ClassBodyComponent>
        </div>
        <svg id="patchCords"></svg>
    }




@code {
    List<String> Values = new List<String> ();

    //geDiagramContainer

    private int _classCounter = 0;
    private String? IDName;

    private async Task CreateClass()
    {
        IDName = "class" + _classCounter;
        Values.Add(IDName);
        _classCounter++;
        System.Diagnostics.Debug.Print(IDName); 
        
    }


    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await JS.InvokeVoidAsync("testDragAndDrop", ".draggable");
            
        }
        await JS.InvokeVoidAsync("setInitialPos", "new");
    }
}

